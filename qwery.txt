v_kantor_perwakilan

select a.ID_KNT_PERWAKILAN,a.ID_NEGARA,b.NEGARA,a.ID_JNS_PERWAKILAN,d.NM_JNS_PERWAKILAN,a.ID_SUB_JNS,c.NM_SUB_JNS,a.NM_KNT_PERWAKILAN,a.ALAMAT,a.KOTA,
a.TELP,a.FAX,a.EMAIL,a.KET,b.BENDERA from
((m_kantor_perwakilan a left join m_negara b on a.ID_NEGARA=b.ID_NEGARA) left join m_sub_jns_perwakilan c on  
c.ID_JNS_PERWAKILAN =a.ID_JNS_PERWAKILAN  and c.ID_SUB_JNS = a.ID_SUB_JNS) left join m_jns_perwakilan d on  
d.ID_JNS_PERWAKILAN =a.ID_JNS_PERWAKILAN


v_diplomat

select a.ID_DIPLOMAT,a.ID_KNT_PERWAKILAN,a.ID_JNS_PASPOR,a.ID_JNS_VISA,a.ID_NEGARA,a.NM_DIPLOMAT,a.TEMPAT_LAHIR,a.TGL_LAHIR,
a.JK,a.FOTO,a.PEKERJAAN,a.ALAMATLN,a.ST_SIPIL,a.NO_PASPOR,a.PASPOR_OLEH,a.PASPOR_TGL,a.AKHIR_BERLAKU,a.NO_VISA,a.VISA_OLEH,
a.LAMA_BERDIAM,a.TGL_TIBA,a.ALAMATIN,a.NO_SETKAB,a.BERLAKUSD,a.NO_SPONSOR,a.ST_VISA,b.NEGARA,b.NM_JNS_PERWAKILAN,b.NM_SUB_JNS,b.NM_KNT_PERWAKILAN,c.JNS_PASPOR,c.KD_JNS_PASPOR,a.ID_RANK, d.NM_RANK,a.LAMA_BERDIAM_BLN,a.TELP,a.NO_SR_SETNEG
from ((diplomat a left join v_kantor_perwakilan b on a.ID_KNT_PERWAKILAN = b.ID_KNT_PERWAKILAN) left join m_jns_paspor c on a.ID_JNS_PASPOR = c.ID_JNS_PASPOR ) left join rank d on a.ID_RANK = d.ID_RANK




v_sibling
select a.ID_SIBLING,a.ID_NEGARA,a.ID_DIPLOMAT,a.ID_JNS_PASPOR,a.ID_JNS_RELASI,a.ID_JNS_VISA,a.NM_SIBLING,c.NM_JNS_RELASI,
b.NM_DIPLOMAT,b.NEGARA,b.NM_KNT_PERWAKILAN,a.TEMPAT_LAHIR,a.TGL_LAHIR,a.JK,a.FOTO,
a.PEKERJAAN,a.ALAMATLN,a.ST_SIPIL,a.NO_PASPOR,a.PASPOR_OLEH,a.PASPOR_TGL,a.AKHIR_BERLAKU,a.NO_VISA,a.VISA_OLEH,a.LAMA_BERDIAM,
a.TGL_TIBA,a.ALAMATIN,a.NO_SETKAB,a.BERLAKUSD,a.NO_SPONSOR,a.ST_VISA ,a.LAMA_BERDIAM_BLN,a.TELP,a.NO_SR_SETNEG
from (sibling a left join v_diplomat b on a.ID_DIPLOMAT = b.ID_DIPLOMAT) left join m_jns_relasi c on c.ID_JNS_RELASI = a.ID_JNS_RELASI


v_stay_permit

select a.ID_PERMIT,a.ID_DIPLOMAT,a.ID_JNS_PERMIT,a.NO_AGENDA,a.TGL_AGENDA,a.NO_IZIN_PERMIT,a.TGL_AWAL_PERMIT,a.TGL_AKHIR_PERMIT,
a.KET ,b.NM_JNS_PERMIT,b.KD_JNS_PERMIT,NM_DIPLOMAT,a.ST_PERMIT,a.ST_PERMIT_K,a.NO_NOTA,a.TGL_NOTA from (permit_diplomat a left join m_jns_permit b on b.ID_JNS_PERMIT = a.ID_JNS_PERMIT ) left join diplomat c on a.ID_DIPLOMAT = c.ID_DIPLOMAT  


v_rantor_indiv
select a.ID_PENGGUNAA_FAS,a.ID_JNS_FASILITAS,a.ID_DIPLOMAT,a.ID_KNT_PERWAKILAN,a.TGL_PERSETUJUAN,a.DESKRIPSI,a.NO_PERSETUJUAN,
a.QTY,a.ST_PERSETUJUAN,a.JNS_TRANS_FAS,a.NO_POLISI,a.TAHUN,a.MEREK,a.NO_MESIN  from penggunaan_fasilitas a 

V_RESIPROSITAS
select a.ID_NEGARA,a.NEGARA,a.BENDERA,a.NEG_RANTOR_K,a.NEG_RANTOR_I,
ifnull((select sum(b.QTY) from penggunaan_fasilitas b 
left join m_kantor_perwakilan c on b.ID_KNT_PERWAKILAN = c.ID_KNT_PERWAKILAN where ((b.ID_JNS_FASILITAS=1) ) and c.ID_NEGARA = a.ID_NEGARA ),0) 
as JML_RANTOR_K,
ifnull((select sum(b.QTY) from penggunaan_fasilitas b 
left join m_kantor_perwakilan c on b.ID_KNT_PERWAKILAN = c.ID_KNT_PERWAKILAN where ((b.ID_JNS_FASILITAS=2) ) and c.ID_NEGARA = a.ID_NEGARA ),0) 
as JML_RANTOR_I
from m_negara a

v_fasilitas_lain
select a.ID_PENGGUNAA_FAS,a.ID_JNS_FASILITAS,a.ID_DIPLOMAT,a.ID_KNT_PERWAKILAN,a.TGL_PERSETUJUAN,a.DESKRIPSI,a.NO_PERSETUJUAN,a.QTY,a.ST_PERSETUJUAN,a.TGL_PERMOHONAN ,b.JNS_FASILITAS from penggunaan_fasilitas a left join m_jns_fasilitas b on a.ID_JNS_FASILITAS = b.ID_JNS_FASILITAS where a.ID_JNS_FASILITAS>2

v_max_stay_permit
SELECT DISTINCT B.ID_DIPLOMAT,B.NM_DIPLOMAT,(SELECT E.NM_KNT_PERWAKILAN FROM v_diplomat E WHERE E.ID_DIPLOMAT = B.ID_DIPLOMAT) AS  NM_KNT_PERWAKILAN,(SELECT E.ID_NEGARA FROM v_diplomat E WHERE E.ID_DIPLOMAT = B.ID_DIPLOMAT) AS  ID_NEGARA,(SELECT E.NEGARA FROM v_diplomat E WHERE E.ID_DIPLOMAT = B.ID_DIPLOMAT) AS  NEGARA, (SELECT MAX(C.TGL_AKHIR_PERMIT) FROM permit_diplomat C WHERE B.ID_DIPLOMAT = C.ID_DIPLOMAT AND C.ID_JNS_PERMIT = 1) AS TGL_AKHIR_PERMIT,(SELECT D.NO_AGENDA FROM permit_diplomat D WHERE B.ID_DIPLOMAT = D.ID_DIPLOMAT AND D.ID_JNS_PERMIT = 1  AND D.TGL_AKHIR_PERMIT= (SELECT MAX(C.TGL_AKHIR_PERMIT) FROM permit_diplomat C WHERE B.ID_DIPLOMAT = C.ID_DIPLOMAT AND C.ID_JNS_PERMIT = 1)) AS NO_AGENDA,(SELECT D.TGL_AGENDA FROM permit_diplomat D WHERE B.ID_DIPLOMAT = D.ID_DIPLOMAT AND D.ID_JNS_PERMIT = 1  AND D.TGL_AKHIR_PERMIT= (SELECT MAX(C.TGL_AKHIR_PERMIT) FROM permit_diplomat C WHERE B.ID_DIPLOMAT = C.ID_DIPLOMAT AND C.ID_JNS_PERMIT = 1)) AS TGL_AGENDA,(SELECT D.NO_IZIN_PERMIT FROM permit_diplomat D WHERE B.ID_DIPLOMAT = D.ID_DIPLOMAT AND D.ID_JNS_PERMIT = 1  AND D.TGL_AKHIR_PERMIT= (SELECT MAX(C.TGL_AKHIR_PERMIT) FROM permit_diplomat C WHERE B.ID_DIPLOMAT = C.ID_DIPLOMAT AND C.ID_JNS_PERMIT = 1)) AS NO_IZIN_PERMIT,(SELECT D.TGL_AWAL_PERMIT FROM permit_diplomat D WHERE B.ID_DIPLOMAT = D.ID_DIPLOMAT AND D.ID_JNS_PERMIT = 1  AND D.TGL_AKHIR_PERMIT= (SELECT MAX(C.TGL_AKHIR_PERMIT) FROM permit_diplomat C WHERE B.ID_DIPLOMAT = C.ID_DIPLOMAT AND C.ID_JNS_PERMIT = 1)) AS TGL_AWAL_PERMIT,(SELECT D.KET FROM permit_diplomat D WHERE B.ID_DIPLOMAT = D.ID_DIPLOMAT AND D.ID_JNS_PERMIT = 1  AND D.TGL_AKHIR_PERMIT= (SELECT MAX(C.TGL_AKHIR_PERMIT) FROM permit_diplomat C WHERE B.ID_DIPLOMAT = C.ID_DIPLOMAT AND C.ID_JNS_PERMIT = 1)) AS KET FROM v_stay_permit B WHERE B.ID_JNS_PERMIT = 1

v_id_card
select a.ID_CETAK,a.ID_DIPLOMAT,a.ID_JNS_CETAK_KARTU,a.ID_CARD,a.TGL_AWAL_CARD,a.TGL_AKHIR_CARD,a.COUNTER_CETAK,a.ST_KARTU,a.ST_KARTU_K,b.NM_JNS_CETAK_KARTU,c.NM_DIPLOMAT
from (cetak_kartu_diplomat a left join m_jns_cetak_kartu b on b.ID_JNS_CETAK_KARTU = a.ID_JNS_CETAK_KARTU) left join diplomat c on c.ID_DIPLOMAT = a.ID_DIPLOMAT

v_max_id_card
SELECT DISTINCT B.ID_DIPLOMAT,B.NM_DIPLOMAT,(SELECT MAX(C.ID_CETAK) FROM cetak_kartu_diplomat C WHERE B.ID_DIPLOMAT = C.ID_DIPLOMAT ) AS ID_CETAK,(SELECT D.ID_CARD FROM cetak_kartu_diplomat D WHERE B.ID_DIPLOMAT = D.ID_DIPLOMAT AND D.ID_CETAK= (SELECT MAX(C.ID_CETAK) FROM cetak_kartu_diplomat C WHERE B.ID_DIPLOMAT = C.ID_DIPLOMAT )) AS ID_CARD, (SELECT D.TGL_AWAL_CARD FROM cetak_kartu_diplomat D WHERE B.ID_DIPLOMAT = D.ID_DIPLOMAT AND D.ID_CETAK= (SELECT MAX(C.ID_CETAK) FROM cetak_kartu_diplomat C WHERE B.ID_DIPLOMAT = C.ID_DIPLOMAT )) AS TGL_AWAL_CARD,(SELECT D.TGL_AKHIR_CARD FROM cetak_kartu_diplomat D WHERE B.ID_DIPLOMAT = D.ID_DIPLOMAT AND D.ID_CETAK= (SELECT MAX(C.ID_CETAK) FROM cetak_kartu_diplomat C WHERE B.ID_DIPLOMAT = C.ID_DIPLOMAT )) AS TGL_AKHIR_CARD,(SELECT F.ID_NEGARA FROM v_diplomat F WHERE B.ID_DIPLOMAT =F.ID_DIPLOMAT ) AS ID_NEGARA, (SELECT F.NM_KNT_PERWAKILAN FROM v_diplomat F WHERE B.ID_DIPLOMAT =F.ID_DIPLOMAT ) AS NM_KNT_PERWAKILAN FROM v_id_card B 

v_approval_permit
select a.ID_PERMIT,a.ID_DIPLOMAT,a.ID_JNS_PERMIT,a.NO_AGENDA,a.TGL_AGENDA,a.NO_IZIN_PERMIT,a.TGL_AWAL_PERMIT,a.TGL_AKHIR_PERMIT,
a.KET ,b.NM_JNS_PERMIT,b.KD_JNS_PERMIT,NM_DIPLOMAT,a.ST_PERMIT,a.ST_PERMIT_K,c.PEKERJAAN,d.NM_KNT_PERWAKILAN, e.BENDERA,e.NEGARA,e.ID_NEGARA,f.KET  as KET_LAY from ((((permit_diplomat a left join 
m_jns_permit b on b.ID_JNS_PERMIT = a.ID_JNS_PERMIT ) left join diplomat c on a.ID_DIPLOMAT = c.ID_DIPLOMAT) left join m_kantor_perwakilan d on c.ID_KNT_PERWAKILAN = d.ID_KNT_PERWAKILAN ) left join m_negara e on c.ID_NEGARA = e.ID_NEGARA ) left join rank f on f.ID_RANK = c.ID_RANK

v_approval_rantorI 
select a.ID_PENGGUNAA_FAS,b.ID_DIPLOMAT,b.NM_DIPLOMAT,b.ID_RANK,b.NM_RANK,b.ID_NEGARA,b.NEGARA,b.ID_KNT_PERWAKILAN,b.NM_KNT_PERWAKILAN,a.NO_POLISI, if(a.TGL_PERSETUJUAN is null,'IMPOR','BELI') as ST_ASAL,DATE_FORMAT(if(a.TGL_PERSETUJUAN is null,a.TGL_IZIN_IMPOR,a.TGL_PERSETUJUAN),'%d.%m.%Y') as TANGGAL_IZIN,if(a.TGL_PERSETUJUAN is null,a.NO_IZIN_IMPOR,a.NO_IZIN_BELI) as NO_IZIN ,if(a.TGL_IZIN_JUAL is null,'DIGUNAKAN','DIJUAL') as ST_KENDARAAN,a.ST_PERSETUJUAN,a.ST_PERSETUJUAN_K from penggunaan_fasilitas a left join v_diplomat b on a.ID_DIPLOMAT = b.ID_DIPLOMAT where a.ID_DIPLOMAT<>1 and a.ID_JNS_FASILITAS = 2  and ( (a.TGL_PERSETUJUAN is not null) or (a.TGL_IZIN_IMPOR is not null)) AND b.ID_NEGARA <> 1 and b.ID_DIPLOMAT<>1 ORDER BY TANGGAL_IZIN,a.ID_KNT_PERWAKILAN , b.NM_DIPLOMAT, b.ID_RANK

v_approval_rantorK
select a.ID_PENGGUNAA_FAS,b.ID_KNT_PERWAKILAN,b.ID_NEGARA,b.ID_JNS_PERWAKILAN,b.ID_SUB_JNS,b.NM_KNT_PERWAKILAN,b.ALAMAT,b.KOTA,b.NEGARA,b.NM_JNS_PERWAKILAN,b.NM_SUB_JNS,b.BENDERA,a.NO_POLISI, if(a.TGL_PERSETUJUAN is null,'IMPOR','BELI') as ST_ASAL,DATE_FORMAT(if(a.TGL_PERSETUJUAN is null,a.TGL_IZIN_IMPOR,a.TGL_PERSETUJUAN),'%d.%m.%Y') as TANGGAL_IZIN,if(a.TGL_PERSETUJUAN is null,a.NO_IZIN_IMPOR,a.NO_IZIN_BELI) as NO_IZIN ,if(a.TGL_IZIN_JUAL is null,'DIGUNAKAN','DIJUAL') as ST_KENDARAAN,a.ST_PERSETUJUAN,a.ST_PERSETUJUAN_K from penggunaan_fasilitas a left join v_kantor_perwakilan b on a.ID_KNT_PERWAKILAN = b.ID_KNT_PERWAKILAN where a.ID_DIPLOMAT=1 and a.ID_JNS_FASILITAS = 1  and ( (a.TGL_PERSETUJUAN is not null) or (a.TGL_IZIN_IMPOR is not null)) AND b.ID_NEGARA <> 1  ORDER BY TANGGAL_IZIN,b.NEGARA,b.NM_KNT_PERWAKILAN 

v_id_card_s
select a.ID_CETAK_S,a.ID_SIBLING,a.ID_JNS_CETAK_KARTU,a.ID_CARD,a.TGL_AWAL_CARD,a.TGL_AKHIR_CARD,a.COUNTER_CETAK,a.ST_KARTU,a.ST_KARTU_K,b.NM_JNS_CETAK_KARTU,c.NM_SIBLING,d.ID_DIPLOMAT,d.NM_DIPLOMAT
from ((cetak_kartu_sibling a left join m_jns_cetak_kartu b on b.ID_JNS_CETAK_KARTU = a.ID_JNS_CETAK_KARTU) left join sibling c on c.ID_SIBLING = a.ID_SIBLING ) left join diplomat d on c.ID_DIPLOMAT = d.ID_DIPLOMAT

===============================================
===============================================
===============================================
===============================================
===============================================
LAP PERMIT
SELECT a.ID_NEGARA, a.NEGARA, b.ID_JNS_PERMIT ,b.KD_JNS_PERMIT,c.NM_PERLAKUAN,(select count(d.ID_PERMIT) from v_approval_permit d where ((a.ID_NEGARA = d.ID_NEGARA) and (b.ID_JNS_PERMIT  = d.ID_JNS_PERMIT)  and (c.NM_PERLAKUAN = d.KET_LAY)) and (st_permit = 2 and st_permit_k = 2) and (TGL_AWAL_PERMIT between '2006-11-08' and '2009-12-09')  ) as JUMLAH FROM m_negara a ,m_jns_permit b, perlakuan c where a.ID_NEGARA <> 1 Group by a.ID_NEGARA,  b.ID_JNS_PERMIT ,c.NM_PERLAKUAN


rantor indiv
select a.ID_PENGGUNAA_FAS,b.NM_DIPLOMAT,b.NM_RANK,b.NM_KNT_PERWAKILAN,a.NO_POLISI,  if(a.TGL_PERSETUJUAN is null,'IMPOR','BELI') as ST_ASAL,DATE_FORMAT(if(a.TGL_PERSETUJUAN is null,a.TGL_IZIN_IMPOR,a.TGL_PERSETUJUAN),'%d.%m.%Y') as TANGGAL_IZIN,if(a.TGL_PERSETUJUAN is null,a.NO_IZIN_IMPOR,a.NO_IZIN_BELI) as NO_IZIN ,if(a.TGL_IZIN_JUAL is null,'DIGUNAKAN','DIJUAL') as ST_KENDARAAN  from penggunaan_fasilitas a left join v_diplomat b on a.ID_DIPLOMAT = b.ID_DIPLOMAT where a.ID_DIPLOMAT<>1 and b.ID_NEGARA <> 1  and  a.ID_JNS_FASILITAS = 2  AND (a.ST_PERSETUJUAN = 2)

rantor kantor
select b.NM_KNT_PERWAKILAN,b.ALAMAT,a.NO_POLISI,  if(a.TGL_PERSETUJUAN is null,'IMPOR','BELI') as ST_ASAL,DATE_FORMAT(if(a.TGL_PERSETUJUAN is null,a.TGL_IZIN_IMPOR,a.TGL_PERSETUJUAN),'%d.%m.%Y') as TANGGAL_IZIN,if(a.TGL_PERSETUJUAN is null,a.NO_IZIN_IMPOR,a.NO_IZIN_BELI) as NO_IZIN ,if(a.TGL_IZIN_JUAL is null,'DIGUNAKAN','DIJUAL') as ST_KENDARAAN  from  penggunaan_fasilitas a  left join m_kantor_perwakilan b on a.ID_KNT_PERWAKILAN = b.ID_KNT_PERWAKILAN where a.ID_DIPLOMAT= 1 and a.ID_JNS_FASILITAS = 1  AND (a.ST_PERSETUJUAN = 2)